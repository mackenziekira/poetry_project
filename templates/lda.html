{% extends 'base.html' %}
{% block title %}Poets{% endblock %}
{% block content %}

<h1>Latent Dirichlet Allocation</h1>
<select id="authors" name="authors">
{% for author in authors %}
<option value="{{ author.author_id }}">{{ author.name }}</value>
{% endfor %}
</select>

<div id="tables" class="container">

</div>

{% endblock %}

{% block script %}
<script type="text/javascript">

function renderTable(data) {
    $('#tables').append('<table class="table table-striped"><tbody id=' + counter + '>');
    $.each(data, function(k, v) {
        console.log('ok');
        console.log(v);
        $('#' + counter).append('<tr><td>' + v + '</td></tr>');
});
    $('#tables').append('</tbody></table>');
    counter++;
    
}

function fetchInfo(e) {
    var id = this.value;
    var url = '/author_lda/' + id + '.json';
    $.get(url, renderTable);
}

$('#authors').on('change', fetchInfo);
var counter = 0;

</script>


{% endblock %}